<template>
  <header class="flex flex-wrap justify-between items-center h-14">
    <div class="flex flex-wrap items-center">
      <!-- Dataset title -->
      <span class="font-bold text-black">{{
        viewConfig.description?.title
      }}</span>

      <!-- More info -->
      <ButtonCustom
        variant="ghost"
        size="xs"
        class="flex items-center py-1 px-3 m-1 h-6 text-xs"
        ><IconInfo class="mr-2 stroke-current" /><span
          >More info</span
        ></ButtonCustom
      >

      <!-- Popup -->
      <PopoverCustom class="relative">
        <PopoverCustomButton
          v-slot="{ open }"
          class="flex justify-center items-center w-6 h-6 text-green-500 hover:text-white focus:text-white hover:bg-green-500 focus:bg-green-500 rounded border"
          ><IconThreeDots
            class="transition-transform fill-current"
            :class="{ 'rotate-90': open }"
        /></PopoverCustomButton>

        <PopoverCustomPanel>
          <PopoverContentHeader>Switch between views</PopoverContentHeader>
          <PopoverContentDivider />
          <PopoverContent
            with-hover
            class="flex items-center"
            @click="picked = 'generated'"
          >
            <RadioCustom
              id="firsto"
              v-model="picked"
              value="generated"
              label="Autogenerated view"
            ></RadioCustom>
          </PopoverContent>
          <PopoverContentDivider />
          <PopoverContent
            with-hover
            class="flex items-center"
            @click="picked = 'embedded'"
          >
            <RadioCustom
              id="secu"
              v-model="picked"
              value="embedded"
              label="Configured view"
            ></RadioCustom>
          </PopoverContent>
          <PopoverContentHeader>Select size of columns</PopoverContentHeader>
          <PopoverContentDivider />
          <PopoverContent class="flex justify-between">
            <ButtonCustom
              :variant="columnWidth === 'small' ? 'solid' : 'ghost'"
              size="sm"
              class="w-28"
              @click="columnWidth = 'small'"
              >small</ButtonCustom
            >
            <ButtonCustom
              :variant="columnWidth === 'medium' ? 'solid' : 'ghost'"
              size="sm"
              class="w-28"
              @click="columnWidth = 'medium'"
              >medium</ButtonCustom
            >
            <ButtonCustom
              :variant="columnWidth === 'large' ? 'solid' : 'ghost'"
              size="sm"
              class="w-28"
              @click="columnWidth = 'large'"
              >large</ButtonCustom
            >
          </PopoverContent>
        </PopoverCustomPanel>
      </PopoverCustom>

      <!-- Show information if current view is auto generated -->
      <div
        v-if="picked === 'generated' || viewConfig.source === 'generated'"
        class="flex items-center px-3 text-[#AA5B00] bg-[#FDF2E6] rounded"
      >
        <span
          class="inline-block mr-3 w-1 h-1 bg-current rounded-full dot"
        ></span
        >Autogenerated view
      </div>
    </div>
    <LanguagePicker />
  </header>
</template>

<script setup lang="ts">
import { defineProps, ref, toRefs } from 'vue';
import { ViewConfig } from '../../viewConfig/types';
import ButtonCustom from '../../../components/button/ButtonCustom.vue';
import IconThreeDots from '../../../components/svg/IconThreeDots.vue';
import IconInfo from '../../../components/svg/IconInfo.vue';
import PopoverCustom from '../../../components/popover/PopoverCustom.vue';
import PopoverCustomButton from '../../../components/popover/PopoverCustomButton.vue';
import PopoverCustomPanel from '../../../components/popover/PopoverCustomPanel.vue';
import PopoverContentDivider from '../../../components/popover/PopoverContentDivider.vue';
import PopoverContent from '../../../components/popover/PopoverContent.vue';
import PopoverContentHeader from '../../../components/popover/PopoverContentHeader.vue';
import RadioCustom from '../../../components/radio/RadioCustom.vue';
import LanguagePicker from '../../../components/language/LanguagePicker.vue';

const props = defineProps<{ viewConfig: ViewConfig }>();
const { viewConfig } = toRefs(props);

const picked = ref<string>();
const columnWidth = ref<string>();
</script>
